<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />
  <title>在庫管理PWA</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='192' height='192'%3E%3Crect width='100%25' height='100%25' fill='%23ffffff'/%3E%3Ctext x='50%25' y='56%25' text-anchor='middle' font-size='96' font-family='Arial' fill='%23000'%3E📦%3C/text%3E%3C/svg%3E" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <h1 class="app-title">在庫管理</h1>
    <div class="badge" id="shortageBadge" aria-live="polite" title="不足件数">不足 0</div>
  </header>

  <nav class="tabs" role="tablist" aria-label="メインタブ">
    <button class="tab active" role="tab" aria-selected="true" aria-controls="view-shortages" id="tab-shortages">今日の不足</button>
    <button class="tab" role="tab" aria-selected="false" aria-controls="view-items" id="tab-items">在庫一覧</button>
    <button class="tab" role="tab" aria-selected="false" aria-controls="view-settings" id="tab-settings">自動減算・設定</button>
  </nav>

  <main>
    <!-- 今日の不足 -->
    <section id="view-shortages" class="view active" role="tabpanel" aria-labelledby="tab-shortages">
      <div class="toolbar">
        <button id="openSoloelTop" class="btn">ソロエル（検索）を開く</button>
      </div>
      <div id="shortagesContainer" class="cards" aria-live="polite"></div>
    </section>

    <!-- 在庫一覧 -->
    <section id="view-items" class="view" role="tabpanel" aria-labelledby="tab-items">
      <div class="toolbar row-gap">
        <input id="searchInput" type="search" placeholder="検索（商品名）" aria-label="商品名で検索" />
        <select id="categorySelect" aria-label="カテゴリで絞り込み">
          <option value="">すべてのカテゴリ</option>
          <option value="食品">食品</option>
          <option value="消耗品">消耗品</option>
          <option value="資材">資材</option>
          <option value="その他">その他</option>
        </select>
      </div>
      <div id="itemsContainer" class="cards" aria-live="polite"></div>
    </section>

    <!-- 自動減算・設定 -->
    <section id="view-settings" class="view" role="tabpanel" aria-labelledby="tab-settings">
      <div class="panel">
        <h2>季節係数と土日係数</h2>
        <ul class="list">
          <li>冬（11–2月）：0.5</li>
          <li>中間（3–5, 10月）：1.0</li>
          <li>夏（6–9月）：1.5</li>
          <li>土日係数：1.2</li>
        </ul>

        <div class="toolbar">
          <button id="runDecrement" class="btn primary">今すぐ自動減算（テスト）</button>
          <button id="reloadItems" class="btn">最新データ取得</button>
        </div>
        <p class="note">「夏は自動減算オフ」の編集は、今回はスプレッドシートで行ってください。</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <small>GitHub Pages / Google Apps Script / スプレッドシート連携</small>
  </footer>

  <!-- Environment (GAS API base URL) -->
  <script src="env.js"></script>
  <!-- App -->
  <script src="app.js"></script>
</body>
</html>

